<div *ngIf="usuario.length > 0">










<div class="contenedorPrincipal">
  <br>
  <div class="img">
    <div
      class="icon-container"
      style="background-color: #6ea1ca; border-radius: 50%"
    >
      <i
        class="fa-solid fa-cart-shopping"
        style="font-size: 30px; color: #fff"
      ></i>
    </div>
    <h1
      class="titulo"
      style="
        text-align: center;
        font-size: 48px;
        font-weight: bold;
        font-family: Century Gothic,CenturyGothic,AppleGothic,sans-serif; 
        margin-left: 10px;
      "
    >
      Compras
    </h1>
  </div>
  <hr />
  
  <a href="" class="btn btn-success" routerLink="compraMateria"
    ><i class="fa-solid fa-cart-plus"></i> Comprar</a
  >
  <br />
  <br />
  <div class="card">
    <h3
      class="card-header"
      style="
        font-weight: bold;
        font-size: 18px;
        color: white;
        background-color: #6ea1ca;
        display: flex;
        justify-content: center;
        align-items: center;
      "
    >
      Historial de compras
    </h3>

    <div class="card-body">
      <div class="outer-container">  
        <label for="fechaFiltro" style="margin-left: 120px; font-weight: bold;">Filtrar por fecha:</label>
        <input type="date" class="form-control datepicker" style="width: 800px;" id="fechaFiltro" (change)="aplicarFiltroPorFecha($event)">
  
      </div>
      <br />
      <div 
      style="overflow-x: auto; overflow-y: auto; max-height: 400px">
      <table class="table table-striped table-hover">
        <thead>
          <tr>
            <th>Usuario</th>
            <th>Materia prima</th>
            <th>Cant. comprada</th>
            <th>Fecha de compra</th>
          </tr>
        </thead>
        <tbody class="table-group-divider">
            <tr  *ngFor="let compra of listaCompras">
              <td>
                <ng-container *ngFor="let user of listaUser">
                  <ng-container
                    *ngIf="
                      user.id == compra.id_usuario
                    "
                  >
                    {{ user.name }}
                  </ng-container>
                </ng-container>

              </td>
              <td> 
                <ng-container *ngFor="let materia of listaMaterias">
                  <ng-container
                    *ngIf="
                      materia.id_materia_prima == compra.id_materia_prima 
                    "
                  >
                    {{ materia.nombre }}
                  </ng-container>
                </ng-container>

              </td>
              <td>{{ compra.cantidad_comprada }}</td>
              <td>{{ compra.fecha_compra }}</td>
          </tr>
        </tbody>
      </table>
  

      </div>  </div>
  </div>
</div>




</div>
<div *ngIf="usuario == ''">
  <h1>Al parecer no tienes acceso a esta p√°gina, regresemos.</h1>
  <br>
  <label for="">Inicia sesion</label>
  <br>
  <br>

  <button routerLink="../login" class="btn btn-primary">vamos</button>
</div>